<body>

    <header>
      <img src="../assets/images/ribbon.png" alt="present ribbon" id="ribbon">
  
      <img 
        src="../assets/images/santa-hat.png" 
        alt="santa hat logout button" 
        id="logout-hat"
      >
      <button class="logout-text hat-button" (click)="logout()">
        Logout
      </button>
  
      <img 
        src="../assets/images/santa-hat.png" 
        alt="santa hat create cards button" 
        id="letter-hat"
      >
      <button class="letter-text hat-button" routerLink="thank-you-letters">
        Generate thank yous
      </button>
    </header>



  <h1>Welcome, {{user.displayName}}</h1>
  <h2>To your personal presents service!</h2>

  

  <div class="container">
    <div class="current-data">
      <h3>Current data</h3>
  
      <div *ngFor="let present of presents | async">

        <div  class="present">
          <p> <i class="fa fa-gift" aria-hidden="true"></i>: {{present.whatItWas}} </p>
          <p> Picture is of: {{present.picture}} </p>
          <p> From {{present.whoFrom}} to {{present.whoTo}} </p>
          <p> Present rating: {{present.rating}} </p>
          <p> Present was received on {{present.dateOpened.toDate() | date}} </p>
          <p> 
            Thank you letter sent 
            <input
              type="checkbox"
              [(ngModel)]="present.thanked"
              name="thanked"
              (change)="updateThanked(present.thanked, present.id)"
            >
          </p>
    
          <button (click)="showHideUpdateForm(present)">Edit info</button>
          <button (click)="deletePresent(present.id)">Delete</button>
        </div>
        
  
        <form #updateForm="ngForm" (ngSubmit)="updateData(updateForm.value, present)" [hidden]="present.hideEdit">
  
            <label for="who-from-update">Who was the present from?</label> 
            <input
              id="who-from-update"
              type="text"
              [(ngModel)]="present.whoFrom"
              #whoFromUpdate="ngModel"
              name="whoFrom"
              style="text-transform: capitalize;"
              required
            >
            <div *ngIf="whoFromUpdate.touched && whoFromUpdate.invalid">
              Required
            </div>
        
            <label for="who-to-update">Who was the present for?</label>
            <input
              id="who-to-update"
              type="text"
              [(ngModel)]="present.whoTo"
              #whoToUpdate="ngModel"
              name="whoTo"
              style="text-transform: capitalize;"
              required
            >
            <div *ngIf="whoToUpdate.touched && whoToUpdate.invalid">
              Required
            </div>
        
            <label for="what-it-was-update">What was the present?</label>
            <textarea
              id="what-it-was-update"
              type="text"
              [(ngModel)]="present.whatItWas"
              #whatItWasUpdate="ngModel"
              name="whatItWas"
              rows="3"
              required
            ></textarea>
            <div *ngIf="whatItWasUpdate.touched && whatItWasUpdate.invalid">
              Required
            </div>
        
            <label for="picture-update">Upload a picture</label>
            <input
              id="picture-update"
              type="text"
              [(ngModel)]="present.picture"
              #picture="ngModel"
              name="picture"
              style="text-transform: capitalize;"
              required
            >
        
            <label for="rating-update">Rate the present out of 5</label>
            <input
              id="rating-update"
              type="range"
              [(ngModel)]="present.rating"
              #ratingUpdate="ngModel"
              name="rating"
              min="0" max="5"
              required
            >
            <div *ngIf="ratingUpdate.touched && ratingUpdate.invalid">
              Required
            </div>
  
            <button type="submit" [disabled]="updateForm.form.invalid">Update</button>
            
        </form>
  
        <button type="button" (click)="showHideUpdateForm(present)" [hidden]="present.hideEdit">Cancel</button>
  
  
      </div>
  
  
    </div>
  
  
  
  
    <div class="add-data">
      <h3>Add a present</h3>
  
      <form class="add-data-form" #addDataForm="ngForm" (ngSubmit)="addData(addDataForm.value); addDataForm.reset()">
  
          <label for="who-from">Who was the present from?</label>
          <input
            id="who-from"
            type="text"
            ngModel
            #whoFrom="ngModel"
            name="whoFrom"
            style="text-transform: capitalize;"
            required
          >
          <div *ngIf="whoFrom.touched && whoFrom.invalid">
              Required
          </div>
      
          <label for="who-to">Who was the present for?</label>
          <input
            id="who-to"
            type="text"
            ngModel
            #whoTo="ngModel"
            name="whoTo"
            style="text-transform: capitalize;"
            required
          >
          <div *ngIf="whoTo.touched && whoTo.invalid">
            Required
          </div>
      
          <label for="what-it-was">What was the present?</label>
          <textarea
            id="what-it-was"
            type="text"
            ngModel
            #whatItWas="ngModel"
            name="whatItWas"
            rows="3"
            style="text-transform: capitalize;"
            required
          ></textarea>
          <div *ngIf="whatItWas.touched && whatItWas.invalid">
            Required
          </div>
      
          <label for="picture">Upload a picture</label>
          <input
            id="picture"
            type="text"
            ngModel
            #picture="ngModel"
            name="picture"
            style="text-transform: capitalize;"
            required
          >
      
          <label for="rating">Rate the present out of 5</label>
          <input
            id="rating"
            type="range"
            ngModel
            #rating="ngModel"
            name="rating"
            min="0" max="5"
            required
          >
          <div *ngIf="rating.touched && rating.invalid">
            Required
          </div>
        
          <button class="add-button" type="submit">Add</button>
        
        </form>    
  
    </div>
  </div>


</body>
